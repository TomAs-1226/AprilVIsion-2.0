<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AprilVision 3.1 Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Compact Header -->
    <header>
        <h1>üéØ AprilVision 3.1</h1>
        <div class="status-bar">
            <span id="status-uptime">‚è± --</span>
            <span id="status-temp">üå° --¬∞C</span>
            <span id="status-nt" class="status-indicator disconnected">
                NT: <span id="nt-status-text">Disconnected</span>
                <span id="nt-server-ip" style="font-size:0.8em;"></span>
            </span>
            <span id="status-clients">üë• 0</span>
        </div>
    </header>

    <!-- Main Content Grid -->
    <main>
        <!-- Camera Grid (2x2) -->
        <section class="camera-grid">
            <!-- Camera 0 -->
            <div class="camera-panel" data-cam="0">
                <div class="camera-header">
                    <h3>üì∑ Camera 0</h3>
                    <span class="cam-stats">
                        <span class="fps" data-cam="0">-- fps</span>
                        <span class="latency" data-cam="0">-- ms</span>
                        <span class="tags" data-cam="0">0 tags</span>
                    </span>
                </div>
                <div class="camera-container">
                    <img id="cam0-img" alt="Camera 0">
                    <canvas id="cam0-overlay"></canvas>
                </div>
            </div>

            <!-- Camera 1 -->
            <div class="camera-panel" data-cam="1">
                <div class="camera-header">
                    <h3>üì∑ Camera 1</h3>
                    <span class="cam-stats">
                        <span class="fps" data-cam="1">-- fps</span>
                        <span class="latency" data-cam="1">-- ms</span>
                        <span class="tags" data-cam="1">0 tags</span>
                    </span>
                </div>
                <div class="camera-container">
                    <img id="cam1-img" alt="Camera 1">
                    <canvas id="cam1-overlay"></canvas>
                </div>
            </div>

            <!-- Camera 2 -->
            <div class="camera-panel" data-cam="2">
                <div class="camera-header">
                    <h3>üì∑ Camera 2</h3>
                    <span class="cam-stats">
                        <span class="fps" data-cam="2">-- fps</span>
                        <span class="latency" data-cam="2">-- ms</span>
                        <span class="tags" data-cam="2">0 tags</span>
                    </span>
                </div>
                <div class="camera-container">
                    <img id="cam2-img" alt="Camera 2">
                    <canvas id="cam2-overlay"></canvas>
                </div>
            </div>

            <!-- Empty slot for layout -->
            <div class="camera-panel" style="background: transparent; border: none;"></div>
        </section>

        <!-- Right Side Panels -->
        <aside class="side-panels">
            <!-- Robot Pose -->
            <div class="panel">
                <h3>ü§ñ Robot Pose</h3>
                <div class="pose-values">
                    <div class="pose-row">
                        <label>X</label>
                        <span id="pose-x">--.--</span>
                        <span class="unit">m</span>
                    </div>
                    <div class="pose-row">
                        <label>Y</label>
                        <span id="pose-y">--.--</span>
                        <span class="unit">m</span>
                    </div>
                    <div class="pose-row">
                        <label>Œ∏</label>
                        <span id="pose-theta">--.--</span>
                        <span class="unit">¬∞</span>
                    </div>
                </div>
                <div class="confidence-bar">
                    <div id="confidence-fill" style="width: 0%"></div>
                </div>
                <div class="pose-field">
                    <canvas id="field-canvas" width="400" height="200"></canvas>
                </div>
            </div>

            <!-- Stats -->
            <div class="panel">
                <h3>üìä Stats</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">Tags:</span>
                        <span class="stat-value" id="total-tags">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Cameras:</span>
                        <span class="stat-value" id="cameras-count">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Confidence:</span>
                        <span class="stat-value" id="confidence-value">0%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Ambiguity:</span>
                        <span class="stat-value" id="ambiguity-value">--</span>
                    </div>
                </div>
            </div>

            <!-- Auto-Align -->
            <div class="panel">
                <h3>üéØ Auto-Align</h3>
                <div class="auto-align-controls">
                    <input type="number" id="target-tag-id" value="7" placeholder="Tag ID" style="width: 60px;">
                    <button id="set-align-target">Set Target</button>
                    <button id="clear-align" class="danger">Clear</button>
                    <button id="test-semicircle">Test Path</button>
                </div>
                <div class="auto-align-status" id="align-status" style="display:none;">
                    <div>Target: <span id="align-target">--</span></div>
                    <div>Error: <span id="align-error">--</span></div>
                    <div>Status: <span id="align-ready">--</span></div>
                </div>
            </div>
        </aside>

        <!-- Test Mode Status Banner (hidden by default) -->
        <div id="test-mode-status" style="display:none; background:#1a1a2e; border:1px solid #e94560; padding:8px 12px; margin:4px 0; border-radius:4px;">
            <strong id="current-test-mode" style="color:#e94560;">--</strong>
            <span id="test-instructions" style="color:#ccc; margin-left:8px; font-size:0.9em;">--</span>
        </div>

        <!-- Bottom Controls -->
        <section class="bottom-controls">
            <div class="control-group">
                <label>Test:</label>
                <button id="start-calibration-mode">Calibration</button>
                <button id="start-validation-mode">Validation</button>
                <button id="start-diagnostics">Diagnostics</button>
                <button id="stop-test-mode" class="danger" style="display:none;">Stop</button>
            </div>
            <div class="control-group">
                <label>Config:</label>
                <button id="reload-config">Reload Config</button>
            </div>
            <div class="control-group">
                <label for="overlay-toggle">
                    <input type="checkbox" id="overlay-toggle" checked> Overlays
                </label>
            </div>
        </section>
    </main>

    <script src="app.js"></script>
</body>
</html>
